(this["webpackJsonpisosim-reactjs"]=this["webpackJsonpisosim-reactjs"]||[]).push([[0],{46:function(e,t,a){e.exports=a(75)},51:function(e,t,a){},52:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var s=a(0),l=a.n(s),n=a(11),o=a.n(n),i=(a(51),a(52),a(6)),r=a(7),c=a(9),d=a(8),h=a(1),g=a(10),p=a(15),u=a.n(p),m=a(78),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:a.props.show,value:a.props.value},a.closeThis=a.closeThis.bind(Object(h.a)(a)),a.valueChanged=a.valueChanged.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"valueChanged",value:function(e){this.setState({value:e.target.value})}},{key:"closeThis",value:function(){this.setState({show:!0}),this.props.onClose(this.state.value)}},{key:"componentDidUpdate",value:function(e,t,a){!1===e.show&&!0===this.props.show&&!1===this.state.show?this.setState({show:!0,value:this.props.value}):!1===this.props.show&&!0===this.state.show&&this.setState({show:!1,value:this.props.value})}},{key:"render",value:function(){return!0===this.state.show?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{borderBottom:"solid",borderColor:"red"}},l.a.createElement("textarea",{style:{fontFamily:"courier new",width:"100%",minHeight:"80px",maxHeight:"200px"},onChange:this.valueChanged,disabled:this.props.readOnly,value:this.state.value}),l.a.createElement("div",{style:{height:"25px"}},l.a.createElement(m.a,{size:"sm",style:{float:"right",fontSize:"10px"},onClick:this.closeThis}," OK ")))):null}}]),t}(l.a.Component),v=a(45),E=a(44),b=function(e){function t(e){var a;if(Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).fieldValueChanged=a.fieldValueChanged.bind(Object(h.a)(a)),a.fieldSelectionChanged=a.fieldSelectionChanged.bind(Object(h.a)(a)),a.onFieldUpdate=a.onFieldUpdate.bind(Object(h.a)(a)),a.appendFieldContent=a.appendFieldContent.bind(Object(h.a)(a)),a.setSelected=a.setSelected.bind(Object(h.a)(a)),a.setNewValue=a.setNewValue.bind(Object(h.a)(a)),a.showExpanded=a.showExpanded.bind(Object(h.a)(a)),a.closeExpanded=a.closeExpanded.bind(Object(h.a)(a)),a.getBgColor=a.getBgColor.bind(Object(h.a)(a)),a.setError=a.setError.bind(Object(h.a)(a)),a.selectable=!0,a.props.readOnly)a.selectable=!1,a.state={bgColor:"white",hasError:!1,selected:!0,id2Value:a.props.id2Value,fieldValue:a.props.id2Value.get(a.props.field.Id),showExpanded:!1};else{var s="";["Message Type","MTI","Bitmap"].includes(a.props.field.Name)?(a.selectable=!1,"Bitmap"===a.props.field.Name&&(s=Array(128).fill("0").reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e+t}))),a.state={bgColor:"white",hasError:!1,selected:!0,fieldValue:s,showExpanded:!1}):a.state={bgColor:"white",selected:!1,hasError:!1,fieldValue:s,showExpanded:!1},a.props.isoMsg.set(a.props.field.Id,Object(h.a)(a))}return a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"getBgColor",value:function(){return this.state.hasError?"red":"white"}},{key:"setError",value:function(e){this.setState({hasError:e})}},{key:"showExpanded",value:function(){this.setState({showExpanded:!0})}},{key:"closeExpanded",value:function(){this.setState({showExpanded:!1})}},{key:"setNewValue",value:function(e){this.setState({fieldValue:e,showExpanded:!1})}},{key:"componentDidUpdate",value:function(e,t,a){e.id2Value!==this.props.id2Value&&this.setState({fieldValue:this.props.id2Value.get(this.props.field.Id),id2Value:this.props.id2Value})}},{key:"onFieldUpdate",value:function(e){var t=this;if(console.log("".concat(this.props.field.Name,": Child field ").concat(e.fieldName," has been updated. ChangeType: ").concat(e.ChangeType)),"Bitmapped"===this.props.field.Type)this.props.field.Children.forEach((function(a){if(a.Name===e.fieldName){var s=t.state.fieldValue,l=Array.from(s);if(console.log("Changing bit "+a.Position),"FieldSelected"===e.ChangeType)l[a.Position-1]="1",a.Position>64&&(l[0]="1");else if("FieldDeselected"===e.ChangeType){l[a.Position-1]="0";for(var n=!0,o=65;o<=128;o++)if("1"===l[o-1]){n=!1;break}n&&(l[0]="0")}var i=l.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return e+t}));t.setState({fieldValue:i})}}));else{var a={fieldName:this.props.field.Name};"FieldSelected"===e.ChangeType?(console.log("setting self as selected",this.props.field.Name),this.setState({selected:!0}),a.ChangeType="FieldSelected"):"FieldDeselected"===e.ChangeType&&(this.setState({selected:!1}),a.ChangeType="FieldDeselected"),this.props.field.Children.forEach((function(a){"FieldSelected"===e.ChangeType?t.props.isoMsg.get(a.Id).setSelected(!0):"FieldDeselected"===e.ChangeType&&t.props.isoMsg.get(a.Id).setSelected(!1)})),this.props.onFieldUpdate(a)}}},{key:"setSelected",value:function(e){var t=this;this.setState({selected:e}),this.props.field.Children.forEach((function(a){t.props.isoMsg.get(a.Id).setSelected(e)}))}},{key:"fieldSelectionChanged",value:function(e){var t={fieldName:this.props.field.Name},a=!1;e.target.checked?(t.ChangeType="FieldSelected",a=!0):t.ChangeType="FieldDeselected","Bitmapped"!==this.props.field.Type&&this.setSelected(a),this.props.onFieldUpdate(t)}},{key:"fieldValueChanged",value:function(e){this.setState({fieldValue:e.target.value});var t={fieldName:this.props.field.Name,ChangeType:"ValueChanged"};this.props.onFieldUpdate(t)}},{key:"appendFieldContent",value:function(e,a,s,n,o){var i=a.Id;this.props.readOnly&&(i="response_seg_"+a.Id),e.push(l.a.createElement(t,{key:i,field:a,id2Value:n,readOnly:this.props.readOnly,parentField:s,isoMsg:this.props.isoMsg,level:o,onFieldUpdate:this.onFieldUpdate}))}},{key:"render",value:function(){var e,t=this;e=this.selectable?l.a.createElement("td",{align:"center"},l.a.createElement("input",{type:"checkbox",checked:this.state.selected,onChange:this.fieldSelectionChanged})):l.a.createElement("td",{align:"center"},l.a.createElement("input",{type:"checkbox",disabled:!0,checked:!0,onChange:this.fieldSelectionChanged}));var a="";this.props.field.ParentId>0&&(a="\u2937"+this.props.field.Position+" ");var s=a+" Type: "+this.props.field.Type+" / ";"Fixed"===this.props.field.Type?s+="Length: "+this.props.field.FixedSize+" / Encoding: "+this.props.field.DataEncoding:"Variable"===this.props.field.Type?s+="Length Indicator: "+this.props.field.LengthIndicatorSize+" / Length Encoding: "+this.props.field.LengthEncoding+" / Data Encoding: "+this.props.field.DataEncoding:this.props.field.Type;var n=[];this.props.field.Children.forEach((function(e){return t.appendFieldContent(n,e,t.props.field,t.state.id2Value,t.props.level+1)}));for(var o="",i=0;i<this.props.level;i++)o+="\u2193";return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,e,l.a.createElement(v.a,{overlay:l.a.createElement(E.a,{id:"hi",style:{fontSize:"10px"}},s),placement:"top"},l.a.createElement("td",{style:{width:"100px",fontFamily:"lato-regular",fontSize:"14px"}},l.a.createElement("span",{style:{color:"blue"}},o+" "),this.props.field.Name)),l.a.createElement("td",null,l.a.createElement("input",{type:"text",value:this.state.fieldValue,style:{fontFamily:"courier new",backgroundColor:this.getBgColor()},onChange:this.fieldValueChanged,disabled:this.props.readOnly,ondblclick:this.showExpanded}),l.a.createElement(m.a,{size:"sm",style:{float:"right",fontSize:"10px",marginRight:"10px"},onClick:this.showExpanded}," + ")," ",l.a.createElement(m.a,{size:"sm",style:{float:"right",fontSize:"10px"},onClick:this.closeExpanded}," - "))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:"3"},l.a.createElement(f,{show:this.state.showExpanded,value:this.state.fieldValue,readOnly:this.props.readOnly,onClose:this.setNewValue}))),n)}}]),t}(l.a.Component),y=a(77),S=new function e(){Object(i.a)(this,e),this.baseUrl="",this.sendMsgUrl=this.baseUrl+"/iso/v0/send",this.loadMsgUrl=this.baseUrl+"/iso/v0/loadmsg",this.allSpecsUrl=this.baseUrl+"/iso/v0/specs",this.templateUrl=this.baseUrl+"/iso/v0/template",this.parseTraceUrl=this.baseUrl+"/iso/v0/parse",this.saveMsgUrl=this.baseUrl+"/iso/v0/save"},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:e.show,selectedMsg:""},a.closeDialogSuccess=a.closeDialogSuccess.bind(Object(h.a)(a)),a.closeDialogFail=a.closeDialogFail.bind(Object(h.a)(a)),a.selectedMsgChanged=a.selectedMsgChanged.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"selectedMsgChanged",value:function(e){this.setState({selectedMsg:e.target.value})}},{key:"componentDidUpdate",value:function(e,t,a){var s=this;!0===this.props.show&&!1===t.show&&u.a.get(S.loadMsgUrl,{params:{specId:this.props.specId,msgId:this.props.msgId}}).then((function(e){s.setState({savedMsgs:e.data,selectedMsg:e.data[0],show:!0})})).catch((function(e){console.log(e),s.setState({show:!0,errorMessage:e.response.data})}))}},{key:"closeDialogSuccess",value:function(){this.setState({show:!1}),this.props.closeLoadMsgDialog(this.state.selectedMsg)}},{key:"closeDialogFail",value:function(){this.setState({show:!1}),this.props.closeLoadMsgDialog(null)}},{key:"render",value:function(){var e;return this.state.show&&(e=this.state.errorMessage?l.a.createElement("div",null,this.state.errorMessage):l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{style:{fontFamily:"lato-regular"}}," Saved Message "),"  ",l.a.createElement("select",{style:{fontFamily:"lato-regular",width:"200px"},value:this.state.selectedMsg,onChange:this.selectedMsgChanged},this.state.savedMsgs.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))))),l.a.createElement(y.a,{show:this.state.show,onHide:this.closeDialogFail},l.a.createElement(y.a.Header,{closeButton:!0},l.a.createElement(y.a.Title,null,"Load Saved Message")),l.a.createElement(y.a.Body,null,e),l.a.createElement(y.a.Footer,null,l.a.createElement(m.a,{variant:"primary",onClick:this.closeDialogSuccess},"OK"),l.a.createElement(m.a,{variant:"secondary",onClick:this.closeDialogFail},"Close")))}}]),t}(l.a.Component),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:e.show,data:a.props.data,msgTemplate:a.props.msgTemplate},a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"appendFieldContent",value:function(e,t,a,s){e.push(l.a.createElement(b,{key:"response_seg_"+t.Id,field:t,id2Value:a,readOnly:!0,level:s,onFieldUpdate:this.onFieldUpdate}))}},{key:"componentDidUpdate",value:function(e,t,a){(!1===e.show&&!0===this.props.show||t.data!==this.props.data)&&this.setState({show:!0,data:this.props.data,msgTemplate:this.props.msgTemplate})}},{key:"render",value:function(){var e=this,t=[];if(this.state.show){var a=new Map;return this.state.data.forEach((function(e){a.set(e.Id,e.Value)})),this.state.msgTemplate.Fields.map((function(s){e.appendFieldContent(t,s,a,0)})),console.log(t),l.a.createElement(l.a.Fragment,null,this.props.show?l.a.createElement("table",{border:"0"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{fontFamily:"lato-regular",backgroundColor:"#3effba",fontSize:"15px",borderBottom:"solid",borderColor:"blue"}},l.a.createElement("td",{colSpan:"3",align:"center"},"Response Segment")),l.a.createElement("tr",{style:{fontFamily:"lato-regular",backgroundColor:"#3effba",fontSize:"14px"}},l.a.createElement("td",{align:"center"},"Selection"),l.a.createElement("td",{align:"center",style:{width:"220px"}},"Field"),l.a.createElement("td",{align:"center",style:{width:"220px"}},"Field Data"))),l.a.createElement("tbody",null,t)):null)}return null}}]),t}(l.a.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:e.show,traceMsg:""},a.closeDialogSuccess=a.closeDialogSuccess.bind(Object(h.a)(a)),a.closeDialogFail=a.closeDialogFail.bind(Object(h.a)(a)),a.traceChanged=a.traceChanged.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"traceChanged",value:function(e){this.setState({traceMsg:e.target.value})}},{key:"componentDidUpdate",value:function(e,t,a){!0===this.props.show&&!1===t.show&&this.setState({show:!0,traceMsg:""})}},{key:"closeDialogSuccess",value:function(){this.setState({show:!1}),this.props.setTrace(this.state.traceMsg)}},{key:"closeDialogFail",value:function(){this.setState({show:!1}),this.props.setTrace(null)}},{key:"render",value:function(){var e;return this.state.show&&(e=this.state.errorMessage?l.a.createElement("div",null,this.state.errorMessage):l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{style:{fontFamily:"lato-regular"}}," Trace "),"  ",l.a.createElement("textarea",{key:"trace_input",value:this.state.traceMsg,onChange:this.traceChanged,style:{fontFamily:"courier new",width:"100%"}}))),l.a.createElement(y.a,{show:this.state.show,onHide:this.closeDialogFail},l.a.createElement(y.a.Header,{closeButton:!0},l.a.createElement(y.a.Title,null,"Parse Trace")),l.a.createElement(y.a.Body,null,e),l.a.createElement(y.a.Footer,null,l.a.createElement(m.a,{variant:"primary",onClick:this.closeDialogSuccess},"OK"),l.a.createElement(m.a,{variant:"secondary",onClick:this.closeDialogFail},"Close")))}}]),t}(l.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={show:e.show,msgName:""},a.closeDialogSuccess=a.closeDialogSuccess.bind(Object(h.a)(a)),a.closeDialogFail=a.closeDialogFail.bind(Object(h.a)(a)),a.msgNameChanged=a.msgNameChanged.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"msgNameChanged",value:function(e){this.setState({errorMessage:"",msgName:e.target.value})}},{key:"componentDidUpdate",value:function(e,t,a){!0===this.props.show&&!1===t.show&&this.setState({show:!0,msgName:this.props.msgName})}},{key:"closeDialogSuccess",value:function(){var e=this;if(this.state.msgName&&""!==this.state.msgName&&this.props.data){var t="specId="+this.props.specId+"&msgId="+this.props.msgId+"&dataSetName="+this.state.msgName+"&msg="+JSON.stringify(this.props.data);u.a.post(S.saveMsgUrl,t).then((function(t){console.log(t),e.props.msgSaveSuccess(e.state.msgName),e.setState({show:!1})})).catch((function(t){e.props.msgSaveFailed(t),e.setState({show:!1})}))}else this.setState({errorMessage:"Please specify a message!"})}},{key:"closeDialogFail",value:function(){this.props.msgSaveCancelled(),this.setState({show:!1})}},{key:"render",value:function(){var e,t;return this.state.show&&(console.log("before sending",this.props),this.state.errorMessage&&(t=l.a.createElement("div",{style:{color:"red"}},this.state.errorMessage)),e=this.props.msgId&&this.props.specId?l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{style:{fontFamily:"lato-regular"}}," Message Name "),"  ",l.a.createElement("input",{type:"text",key:"msg_name_save",value:this.state.msgName,onChange:this.msgNameChanged}),t):l.a.createElement("div",null,"Error: Please load a spec/msg, set data before attempting to save")),l.a.createElement(y.a,{show:this.state.show,onHide:this.closeDialogFail},l.a.createElement(y.a.Header,{closeButton:!0},l.a.createElement(y.a.Title,null,"Save Message")),l.a.createElement(y.a.Body,null,e),l.a.createElement(y.a.Footer,null,l.a.createElement(m.a,{variant:"primary",onClick:this.closeDialogSuccess},"OK"),l.a.createElement(m.a,{variant:"secondary",onClick:this.closeDialogFail},"Close")))}}]),t}(l.a.Component),F=new(function(){function e(t){Object(i.a)(this,e),this.validate=this.validate.bind(this)}return Object(r.a)(e,[{key:"validate",value:function(e,t,a){console.log("validate",e,t,a);var s=!1;return"Fixed"===e.Type&&("ASCII"===e.DataEncoding||"EBCDIC"===e.DataEncoding?t.length!==e.FixedSize&&(a.push('\u2b55 "'.concat(e.Name,'" should have a fixed size of ').concat(e.FixedSize," but has ").concat(t.length)),s=!0):t.length!==2*e.FixedSize&&(a.push('\u2b55 "'.concat(e.Name,'" should have a fixed size of ').concat(e.FixedSize," but has ").concat(t.length/2)),s=!0)),"BCD"!==e.DataEncoding&&"BINARY"!==e.DataEncoding||(t.length%2!==0&&(a.push('\u2b55 "'.concat(e.Name,'" should have even number of characters!')),s=!0),"BINARY"!==e.DataEncoding||t.match("^[0-9,a-f,A-F]+$")||(a.push('\u2b55 "'.concat(e.Name,'" supports only hex i.e 0-9,a-z,A-Z')),s=!0),"BCD"!==e.DataEncoding||t.match("^[0-9]+$")||(a.push('\u2b55 "'.concat(e.Name,'" supports only bcd i.e 0-9')),s=!0)),s}}]),e}()),M=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e)),console.log(a.props),console.log("$msg_structure$",a.props.specs,a.props.spec,a.props.msg),a.state={msgTemplate:null,loaded:!1,spec:e.spec,msg:e.msg,shouldShow:e.showMsgTemplate,targetServerIp:"127.0.0.1",targetServerPort:"6666",mliType:"2I",currentDataSet:"",errDialogVisible:!1,errorMessage:"",showLoadMessagesDialog:!1,showTraceInputDialog:!1,showSaveMsgDialog:!1,showResponse:!1,responseData:null},a.onFieldUpdate=a.onFieldUpdate.bind(Object(h.a)(a)),a.appendFieldContent=a.appendFieldContent.bind(Object(h.a)(a)),a.sendToHost=a.sendToHost.bind(Object(h.a)(a)),a.addFieldContent=a.addFieldContent.bind(Object(h.a)(a)),a.serverIpChanged=a.serverIpChanged.bind(Object(h.a)(a)),a.serverPortChanged=a.serverPortChanged.bind(Object(h.a)(a)),a.mliTypeChanged=a.mliTypeChanged.bind(Object(h.a)(a)),a.showErrorDialog=a.showErrorDialog.bind(Object(h.a)(a)),a.closeErrorDialog=a.closeErrorDialog.bind(Object(h.a)(a)),a.processError=a.processError.bind(Object(h.a)(a)),a.showLoadMessagesDialog=a.showLoadMessagesDialog.bind(Object(h.a)(a)),a.closeLoadMsgDialog=a.closeLoadMsgDialog.bind(Object(h.a)(a)),a.showUnImplementedError=a.showUnImplementedError.bind(Object(h.a)(a)),a.setTrace=a.setTrace.bind(Object(h.a)(a)),a.showTraceInputsDialog=a.showTraceInputsDialog.bind(Object(h.a)(a)),a.showSaveMsgDialog=a.showSaveMsgDialog.bind(Object(h.a)(a)),a.msgSaveSuccess=a.msgSaveSuccess.bind(Object(h.a)(a)),a.msgSaveFailed=a.msgSaveFailed.bind(Object(h.a)(a)),a.msgSaveCancelled=a.msgSaveCancelled.bind(Object(h.a)(a)),a.showInfoDialog=a.showInfoDialog.bind(Object(h.a)(a)),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"setTrace",value:function(e){var t=this;null!=e&&(console.log("trace  = ",e),u.a.post(S.parseTraceUrl+"/"+this.state.spec.Id+"/"+this.state.msg.Id,e).then((function(e){console.log("parsed msg data",e.data),e.data.forEach((function(e){t.state.isoMsg.get(e.Id).setState({selected:!0,fieldValue:e.Value})}))})).catch((function(e){console.log(e),t.processError(e)}))),this.setState({showTraceInputDialog:!1})}},{key:"showUnImplementedError",value:function(){this.setState({errorMessage:"This functionality has not been implemented. Please try the old version of application.",errDialogVisible:!0})}},{key:"closeLoadMsgDialog",value:function(e){var t=this;this.setState({showLoadMessagesDialog:!1,currentDataSet:e}),console.log("selected msg = ",e),null!=e&&u.a.get(S.loadMsgUrl,{params:{specId:this.state.spec.Id,msgId:this.state.msg.Id,dsName:e}}).then((function(e){e.data.forEach((function(e){t.state.isoMsg.get(e.Id).setState({selected:!0,fieldValue:e.Value})}))})).catch((function(e){console.log(e),t.processError(e)}))}},{key:"showInfoDialog",value:function(e){this.setState({errDialogVisible:!0,errorMessage:e})}},{key:"msgSaveSuccess",value:function(e){this.showInfoDialog("Message ".concat(e," saved successfully.")),this.setState({showSaveMsgDialog:!1})}},{key:"msgSaveFailed",value:function(e){this.processError(e),this.setState({showSaveMsgDialog:!1})}},{key:"msgSaveCancelled",value:function(){this.setState({showSaveMsgDialog:!1})}},{key:"showSaveMsgDialog",value:function(){var e=this,t=[];this.state.msgTemplate.Fields.forEach((function(a){e.addFieldContent(a,t)})),this.setState({saveData:t,showSaveMsgDialog:!0})}},{key:"showTraceInputsDialog",value:function(){this.setState({showTraceInputDialog:!0})}},{key:"showLoadMessagesDialog",value:function(){this.setState({showLoadMessagesDialog:!0})}},{key:"closeErrorDialog",value:function(){this.setState({errDialogVisible:!1})}},{key:"showErrorDialog",value:function(){this.setState({errDialogVisible:!0})}},{key:"mliTypeChanged",value:function(e){this.setState({mliType:e.target.value})}},{key:"serverIpChanged",value:function(e){this.setState({targetServerIp:e.target.value})}},{key:"serverPortChanged",value:function(e){this.setState({targetServerPort:e.target.value})}},{key:"addFieldContent",value:function(e,t,a){var s=this,l=this.state.isoMsg.get(e.Id);l.state.selected&&(F.validate(e,l.state.fieldValue,a)?l.setError(!0):l.setError(!1),t.push({Id:e.Id,Value:l.state.fieldValue})),e.Children.forEach((function(e){l.state.selected&&s.addFieldContent(e,t,a)}))}},{key:"sendToHost",value:function(){var e=this,t=[],a=[];if(this.state.msgTemplate.Fields.forEach((function(s){e.addFieldContent(s,t,a)})),a.length>0){var s="";return a.forEach((function(e){return s+=e+"\n"})),this.setState({errorMessage:s}),void this.showErrorDialog()}this.setState({showResponse:!1,responseData:[]});var l="host="+this.state.targetServerIp+"&port="+this.state.targetServerPort+"&mli="+this.state.mliType+"&specId="+this.state.spec.Id+"&msgId="+this.state.msg.Id+"&msg="+JSON.stringify(t);u.a.post(S.sendMsgUrl,l).then((function(t){console.log("Response from server",t),e.setState({showResponse:!0,responseData:t.data})})).catch((function(t){console.log("error = ",t),e.processError(t)}))}},{key:"processError",value:function(e){if(!e.response)return console.log(e),void this.setState({errorMessage:"Error: Unable to reach API server",errDialogVisible:!0});400===e.response.status?this.setState({errorMessage:e.response.data,errDialogVisible:!0}):this.setState({errorMessage:"Unexpected error from server - "+e.response.status,errDialogVisible:!0})}},{key:"onFieldUpdate",value:function(e){console.log("field updated =>"+e.fieldName)}},{key:"componentDidMount",value:function(){this.getMessageTemplate(this.props.spec,this.props.msg)}},{key:"getMessageTemplate",value:function(e,t){var a=this,s=this.props.specs.find((function(t){return t.Name===e?t:null})),l=s.Messages.find((function(e){return e.Name===t?e:null})),n=S.templateUrl+"/"+s.Id+"/"+l.Id;console.log(n),u.a.get(n).then((function(e){console.log(e.data);var t=new Map;t.set("msg_template",e.data),a.setState({spec:s,msg:l,msgTemplate:e.data,loaded:!0,isoMsg:t}),console.log("MsgTemplate = ",a.state.msgTemplate)})).catch((function(e){return a.setState({errorMessage:e,errDialogVisible:!0})}))}},{key:"appendFieldContent",value:function(e,t,a,s){e.push(l.a.createElement(b,{key:t.Id,field:t,isoMsg:a,level:s,onFieldUpdate:this.onFieldUpdate}))}},{key:"render",value:function(){var e=this,t=[];return!0===this.state.loaded&&this.state.msgTemplate.Fields.map((function(a){e.appendFieldContent(t,a,e.state.isoMsg,0)})),l.a.createElement("div",{style:{fontFamily:"lato-regular",fontSize:"12px",alignContent:"center",alignSelf:"center",fill:"aqua"}},l.a.createElement(y.a,{show:this.state.errDialogVisible,onHide:this.closeErrorDialog},l.a.createElement(y.a.Header,{closeButton:!0},l.a.createElement(y.a.Title,null,"Error")),l.a.createElement(y.a.Body,null,l.a.createElement("pre",{style:{font:"Lato",fontSize:"14px"}},this.state.errorMessage)),l.a.createElement(y.a.Footer,null,l.a.createElement(m.a,{variant:"secondary",onClick:this.closeErrorDialog},"Close"))),l.a.createElement(C,{show:this.state.showLoadMessagesDialog,specId:this.state.spec.Id,msgId:this.state.msg.Id,closeLoadMsgDialog:this.closeLoadMsgDialog}),l.a.createElement(D,{show:this.state.showTraceInputDialog,setTrace:this.setTrace}),l.a.createElement(k,{show:this.state.showSaveMsgDialog,msgId:this.state.msg.Id,specId:this.state.spec.Id,data:this.state.saveData,msgName:this.state.currentDataSet,msgSaveSuccess:this.msgSaveSuccess,msgSaveFailed:this.msgSaveFailed,msgSaveCancelled:this.msgSaveCancelled}),l.a.createElement("div",{style:{height:"100px",verticalAlign:"baseline",alignItems:"center",margin:"10px"}},l.a.createElement("table",{style:{fontFamily:"lato-regular",fontSize:"14px",alignSelf:"center",borderBottom:"solid",backgroundColor:"#4cffff"}},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("label",{style:{width:"60px"}},"Server Ip "),"   ",l.a.createElement("input",{type:"text",value:this.state.targetServerIp,onChange:this.serverIpChanged})),l.a.createElement("td",null,l.a.createElement("label",{style:{width:"80px"}},"Server Port "),l.a.createElement("input",{type:"text",value:this.state.targetServerPort,onChange:this.serverPortChanged})),l.a.createElement("td",null,l.a.createElement("label",{style:{width:"70px"}},"MLI Type "),l.a.createElement("select",{value:this.state.mliType,onChange:this.mliTypeChanged},l.a.createElement("option",{key:"2i",value:"2I"},"2I"),l.a.createElement("option",{key:"2e",value:"2E"},"2E"))))),l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement(m.a,{size:"sm",onClick:this.showTraceInputsDialog},"Parse Raw")," ",l.a.createElement(m.a,{size:"sm",onClick:this.showLoadMessagesDialog},"Load Message")," ",l.a.createElement(m.a,{size:"sm",onClick:this.showSaveMsgDialog},"Save Message")," ",l.a.createElement(m.a,{size:"sm",onClick:this.sendToHost},"Send"))))),l.a.createElement("div",{style:{align:"center",width:"70%"}},l.a.createElement("div",{style:{float:"left"}},l.a.createElement("table",{border:"0"},l.a.createElement("thead",null,l.a.createElement("tr",{style:{fontFamily:"lato-regular",backgroundColor:"#ff8f5b",fontSize:"15px",borderBottom:"solid",borderColor:"blue"}},l.a.createElement("td",{colspan:"3",align:"center"},"Request Segment")),l.a.createElement("tr",{style:{fontFamily:"lato-regular",backgroundColor:"#ff8f5b",fontSize:"14px"}},l.a.createElement("td",{align:"center"},"Selection"),l.a.createElement("td",{align:"center",style:{width:"220px"}}," Field"),l.a.createElement("td",{align:"center",style:{width:"220px"}},"Field Data"))),l.a.createElement("tbody",null,t))),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(w,{show:this.state.showResponse,data:this.state.responseData,msgTemplate:this.state.msgTemplate}))),l.a.createElement("div",{style:{height:"10px"}}," "))}}]),t}(l.a.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={specs:[],currentSpec:"Select",currentSpecMsg:"",showMsgTemplate:!1,loaded:!1,errDialogVisible:!1,errorMessage:""},a.specChanged=a.specChanged.bind(Object(h.a)(a)),a.messageChanged=a.messageChanged.bind(Object(h.a)(a)),a.msgTemplateRef=l.a.createRef(),a}return Object(g.a)(t,e),Object(r.a)(t,[{key:"closeErrorDialog",value:function(){this.setState({errDialogVisible:!1})}},{key:"showErrorDialog",value:function(){this.setState({errDialogVisible:!0})}},{key:"componentDidMount",value:function(){var e=this;u.a.get(S.allSpecsUrl).then((function(t){console.log(t.data),e.setState({specs:t.data,loaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e,t;return!0===this.state.loaded&&(null==(t=this.getCurrentSpec())&&(t=this.state.specs[0]),e=this.state.currentSpecMsg?this.state.currentSpecMsg:t.Messages[0].Name),l.a.createElement(l.a.Fragment,null,l.a.createElement(y.a,{show:this.state.errDialogVisible,onHide:this.closeErrorDialog},l.a.createElement(y.a.Header,{closeButton:!0},l.a.createElement(y.a.Title,null,"Error")),l.a.createElement(y.a.Body,null,this.state.errorMessage),l.a.createElement(y.a.Footer,null,l.a.createElement(m.a,{variant:"secondary",onClick:this.closeErrorDialog},"Close"))),l.a.createElement("div",{align:"center",style:{verticalAlign:"baseline",backgroundColor:"#ffbe00",height:"80px"}},l.a.createElement("table",{style:{fontFamily:"lato-regular",fontSize:"16px",left:"50%",top:"50%"}},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Message Specification"),l.a.createElement("td",{style:{width:"100px"}}),l.a.createElement("td",null,this.specsDropDown())),l.a.createElement("tr",null,l.a.createElement("td",null,"Message"),l.a.createElement("td",{style:{width:"100px"}}),l.a.createElement("td",null,this.messagesDropDown()))))),l.a.createElement("div",{align:"center"},this.state.loaded&&"Select"!==this.state.currentSpec?l.a.createElement(M,{key:this.state.currentSpec+"_"+e,ref:this.msgTemplateRef,specs:this.state.specs,spec:this.state.currentSpec,msg:e}):null))}},{key:"specChanged",value:function(e){if(this.setState({currentSpec:e.target.value,currentSpecMsg:""}),console.log(e.target.value),this.state.loaded&&"Select"!==e.target.value){console.log("calling update - specChanged");this.getSpecByName(e.target.value)}}},{key:"messageChanged",value:function(e){this.setState({currentSpecMsg:e.target.value}),this.state.loaded&&"Select"!==this.state.currentSpec&&console.log("calling update - msgChanged")}},{key:"specsDropDown",value:function(){return l.a.createElement("select",{style:{fontFamily:"lato-regular",width:"200px"},onChange:this.specChanged},l.a.createElement("option",{key:"Select",value:"Select"},"Select"),this.state.specs.map((function(e){return l.a.createElement("option",{key:e.Name,value:e.Name},e.Name)})))}},{key:"messagesDropDown",value:function(){var e;return this.state.loaded&&(e=this.getCurrentSpec()),"Select"===this.state.currentSpec?l.a.createElement("select",null):l.a.createElement("select",{value:this.state.currentSpecMsg,style:{fontFamily:"lato-regular",width:"150px"},onChange:this.messageChanged},e.Messages.map((function(e){return l.a.createElement("option",{key:e.Id,value:e.Name},e.Name)})))}},{key:"getCurrentSpec",value:function(){var e=this;return this.state.specs.find((function(t,a){return t.Name===e.state.currentSpec?t:null}))}},{key:"getSpecByName",value:function(e){return this.state.specs.find((function(t,a){return t.Name===e?t:null}))}}]),t}(l.a.Component);var j=function(){return l.a.createElement("div",{style:{backgroundColor:"#fbfff0"}},l.a.createElement("h1",{style:{fontFamily:"shadows-into-light"}},"ISO WebSim - ISO8583 Web Simulator"),l.a.createElement("a",{style:{fontFamily:"lato-regular",fontSize:"12px"},href:"/iso/home",target:"_blank"},"[Non React App]"),l.a.createElement("a",{style:{fontFamily:"lato-regular",fontSize:"12px"},href:"/iso/v0/server",target:"_blank"},"[Manage Servers]"),l.a.createElement("div",{className:"App"},l.a.createElement(O,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(74);o.a.render(l.a.createElement(j,{style:{backgroundColor:"blue"}}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.81cefedd.chunk.js.map